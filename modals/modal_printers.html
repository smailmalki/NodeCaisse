<div class="modal-dialog modal-dialog-centered">
	<div class="modal-content">
		<!-- Modal Header -->
		<div class="modal-header">
		  <h4 class="modal-title">Imprimante <span id="imptype"></span></h4>
		</div>

		<!-- Modal body -->
		<div class="modal-body">
			<div class="alert alert-danger" role="alert" id="alertmsgP">
				Alert
			</div>
			<div class="form-row">
              <!-- <div class="form-group col-sm-6">
                  <label for="nomP">Nom Produit</label>
                  <input type="text" class="form-control" id="nomP" placeholder="Nom" >
			   </div> -->

				<nav>
					<div class="nav nav-tabs" id="nav-tab" role="tablist">
						<a class="nav-item nav-link active" id="nav-usb-tab" data-toggle="tab" href="#nav-usb" role="tab" aria-controls="nav-usb" aria-selected="true">USB</a>
						<a class="nav-item nav-link" id="nav-net-tab" data-toggle="tab" href="#nav-net" role="tab" aria-controls="nav-net" aria-selected="false">Network</a>
						<a class="nav-item nav-link" id="nav-serial-tab" data-toggle="tab" href="#nav-serial" role="tab" aria-controls="nav-serial" aria-selected="false">Serial</a>
						<a class="nav-item nav-link" id="nav-blue-tab" data-toggle="tab" href="#nav-blue" role="tab" aria-controls="nav-blue" aria-selected="false">Bluetooth</a>
					</div>
				</nav>
			
			  <div class="tab-content" id="nav-tabContent">
				<div class="tab-pane fade show active" id="nav-usb" role="tabpanel" aria-labelledby="nav-usb-tab">
					<div class="form-group col-sm-12 mt-3">  
						<select class="form-control" style="min-width:300px" id="print">
							<option value="" selected disabled hidden>imprimantes usb</option>
							<option value=""></option>
						</select>
					 </div>
				</div>
				<div class="tab-pane fade" id="nav-net" role="tabpanel" aria-labelledby="nav-net-tab">
					<div class="form-group col-sm-12 mt-3">  
						<input type="text" class="form-control" id="tip" placeholder="IP" style="min-width:300px">
					 </div>
				</div>
				<div class="tab-pane fade" id="nav-serial" role="tabpanel" aria-labelledby="nav-serial-tab">
					<div class="form-row col-sm-12 mt-3">  
						<div class="form-group col-sm-3">
							<input type="text" class="form-control" id="tport" placeholder="Port" >
						</div>
						<div class="form-group col-sm-3">
							<input type="text" class="form-control" id="tbaud" placeholder="Baud rate" >
						</div>
						<div class="form-group col-sm-3">
							<input type="text" class="form-control" id="tstop" placeholder="Stop bite">
						</div>
					</div>
				</div>
				<div class="tab-pane fade" id="nav-blue" role="tabpanel" aria-labelledby="nav-blue-tab">
					<div class="form-group col-sm-6 mt-3">  
						<input type="text" class="form-control" id="tblue" placeholder="Bluetooth address" style="min-width:300px">
					 </div>
				</div>
			  </div>
				<!--<div class="form-group col-sm-6 mt-3">  
                  <select class="form-control" id="print" >
					<option value=""></option>
				  </select>
               </div>-->
            </div>
			<!--<div class="form-row">
               <div class="form-group col-sm-6">
                  <label for="price">Prix</label>
                  <input type="text" class="form-control" id="price" placeholder="Prix">
               </div>
               <div class="form-group col-sm-6">
                  <label for="color">Couleur</label>
                  <input type="text" class="form-control" id="color" placeholder="Couleur">
               </div>
            </div>-->
		</div>

		<!-- Modal footer -->
		<div class="modal-footer">
		  <button type="button" class="btn btn-success" onclick="validprinter($('#imptype').attr('impid'),imptype.innerText)">Valider</button>
		  <button type="button" class="btn btn-danger" data-dismiss="modal">Annuler</button>
		</div>
	</div>
</div>
<script>
	
	//var devices = escpos.USB.findPrinter();
	//alert(devices.length );
	//$(document).ready(function(){
		//$( "#ModalCategory" ).load( "modals/modal_category.html" );
		const escpos = require('escpos');
		escpos.USB = require('escpos-usb');
		var devices = escpos.USB.findPrinter();
		if (devices) {
			devices.forEach(el => 
				$('#print').append('<optgroup label="Port : '+el.portNumbers+'"><option value="'+el.portNumbers+'-'+el.deviceDescriptor.idVendor+'-'+el.deviceDescriptor.idProduct+'">idVendor : '+el.deviceDescriptor.idVendor+' - idProduct : '+el.deviceDescriptor.idProduct+'</option></optgroup>')
			)
		}
		$("#alertmsgP").hide();

		
//});
</script>